import os
import pandas as pd
import glob


configfile: "config/config.yaml"


# Hacky attempt to make conda work
os.environ["PATH"] = config["path_to_conda"] + os.pathsep + os.environ["PATH"]


include: "rules/common.smk"
include: "rules/preprocessing.smk"
include: "rules/meta.smk"
include: "rules/cage.smk"
include: "rules/cerberus.smk"
include: "rules/flair.smk"
include: "rules/isotools.smk"
include: "rules/isoquant.smk"
include: "rules/lapa.smk"
include: "rules/kallisto.smk"
include: "rules/rnaseq.smk"
include: "rules/sqanti.smk"
include: "rules/stringtie.smk"
include: "rules/talon.smk"


rule all:
    input:
        expand("results/{tool}/transcriptome/{tissue}.gtf", tool=WORKING_TOOLS, tissue=util.tissues),
        "results/meta/dag.pdf"
